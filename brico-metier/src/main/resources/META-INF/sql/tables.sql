-- Mettre en place des Index

DROP TABLE KV01.UTILISATEUR;
DROP TABLE KV01.POST;

CREATE TABLE KV01.UTILISATEUR
(
	IDUSER BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY,
	DATE_CREATION TIMESTAMP,		
	PSEUDO VARCHAR(100),
	PASSWORD VARCHAR(100),
	TEL VARCHAR(20),
	MAIL VARCHAR(200),
	VILLE VARCHAR(100),
	CP VARCHAR(10),
	RUE VARCHAR(100),
	NB_VOTES BIGINT,
	NOTE BIGINT,
	ROLE BIGINT,
	CONSTRAINT USER_PK PRIMARY KEY (IDUSER)
) IN TBS_KV01_D INDEX IN TBS_KV01_X;

INSERT INTO KV01.UTILISATEUR(DATE_CREATION, PSEUDO, PASSWORD, ROLE, MAIL) VALUES(CURRENT DATE, 'Diego', 'psw', 0, 'd@d');

CREATE TABLE KV01.POST
(
	IDPOST BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY,
	DATE_CREATION TIMESTAMP,
	IDUSER_CREATION BIGINT,
	PSEUDO_USER_CREATION VARCHAR(100),
	IDPOST_REF BIGINT,
	THEME_ID SMALLINT,
	TITLE VARCHAR(100),
	POST VARCHAR(500),
	NB_VOTES BIGINT,
	NOTE BIGINT,
	POST_VALIDATE SMALLINT,
	CONSTRAINT POST_PK PRIMARY KEY (IDPOST)
) IN TBS_KV01_D INDEX IN TBS_KV01_X;

INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF, IDUSER_CREATION, PSEUDO_USER_CREATION) VALUES('2015-02-17 09:45:00', '1', 'Azaz', 'Post Test 1', 0, 0, 1, 'Diego');
INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF) VALUES('2015-02-17 10:23:00', '1', 'Azaz Suite 1', 'Post Test Suite 1', 0, 1);
INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF) VALUES('2015-02-17 11:06:00', '1', 'Azaz Suite 2', 'Post Test Suite 1', 0, 1);

INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF) VALUES('2015-02-16 13:25:00', '1', 'Bire', 'Post Test 2', 0, 0);
INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF) VALUES('2015-02-15 22:36:00', '1', 'Trul', 'Post Test 3', 1, 0);
INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF) VALUES('2015-02-14 23:53:00', '1', 'Fola', 'Post Test 4', 0, 0);
INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF) VALUES('2015-02-17 17:27:00', '1', 'Gego', 'Post Test 5', 1, 0);
INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF) VALUES('2015-02-16 08:12:00', '1', 'Fifo', 'Post Test 6', 0, 0);
INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF) VALUES('2015-02-15 15:42:00', '1', 'Vuvo', 'Post Test 7', 0, 0);
INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF) VALUES('2015-02-14 12:15:00', '1', 'Qoqo', 'Post Test 8', 1, 0);
INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF) VALUES('2015-02-17 11:59:00', '1', 'Juju', 'Post Test 9', 1, 0);
INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF) VALUES('2015-02-15 07:43:00', '1', 'Jojo', 'Post Test 10', 0, 0);
INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF) VALUES('2015-02-13 01:08:00', '1', 'Erou', 'Post Test 11', 0, 0);
INSERT INTO KV01.POST(DATE_CREATION, THEME_ID, TITLE, POST, POST_VALIDATE, IDPOST_REF) VALUES('2015-02-18 03:03:00', '1', 'Ilou', 'Post Test 12', 0, 0);